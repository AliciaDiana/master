{"ast":null,"code":"var _jsxFileName = \"/Users/aliciafrancis/Desktop/aliciaTest/master/src/components/Product.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { useProductApi } from '../api/product';\nimport { useRewardApi } from '../api/reward';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Product = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [rewards, setRewards] = useState([]);\n  const [startDate, setStartDate] = useState(new Date());\n  const ref = useRef([]);\n  const {\n    getAllProducts,\n    getProductById\n  } = useProductApi();\n  const {\n    getAllRewards\n  } = useRewardApi();\n  useEffect(() => {\n    getAllProducts().then(res => setProducts(res));\n    getAllRewards().then(res => setRewards(res));\n  }, []);\n  let selectedProductPrices = [];\n  const Unchecked = () => {\n    for (let i = 0; i < ref.current.length; i++) {\n      ref.current[i].checked = false;\n    }\n  };\n  const buy = () => {\n    /*\n    Actual - We make a post Api Call\n    then make a get Api for rewards so we can get the updated value\n     */\n\n    // calculate month\n    const month = startDate.getMonth() + 1;\n\n    //calculate points\n    const sum = selectedProductPrices.reduce((a, b) => a + b, 0);\n    let points = 0;\n    if (sum > 100) {\n      points += (sum - 100) * 2;\n      points += 50;\n    } else if (sum > 50) {\n      points += sum - 50;\n    }\n\n    //update reward points\n    if (points > 0) {\n      const nextRewards = rewards.map(r => {\n        if (r.id == month) {\n          return {\n            ...r,\n            point: r.point + points\n          };\n        }\n        return r;\n      });\n      setRewards(nextRewards);\n      Unchecked();\n    }\n  };\n  const selectedProduct = e => {\n    if (e.target.checked) {\n      selectedProductPrices.push(parseInt(e.target.value));\n    } else {\n      selectedProductPrices.splice(selectedProductPrices.indexOf(e.target.value), 1);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Please selelct date and product and click on buy\", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"date-span\",\n        children: /*#__PURE__*/_jsxDEV(DatePicker, {\n          showIcon: true,\n          selected: startDate,\n          onChange: date => setStartDate(date)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cards\",\n      children: products.map((product, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: element => {\n            ref.current[index] = element;\n          },\n          type: \"checkbox\",\n          onClick: selectedProduct,\n          value: product.price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this), product.name, \" - $\", product.price]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"buy-btn btn btn-success btn-lg\",\n        onClick: buy,\n        children: \"Buy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cards\",\n      children: rewards.map((reward, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [reward.name, \" - \", reward.point]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n_s(Product, \"ASvOULyiA8lO05sPn05IzYOVbHk=\", false, function () {\n  return [useProductApi, useRewardApi];\n});\n_c = Product;\nvar _c;\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"names":["React","useEffect","useRef","useState","DatePicker","useProductApi","useRewardApi","jsxDEV","_jsxDEV","Product","_s","products","setProducts","rewards","setRewards","startDate","setStartDate","Date","ref","getAllProducts","getProductById","getAllRewards","then","res","selectedProductPrices","Unchecked","i","current","length","checked","buy","month","getMonth","sum","reduce","a","b","points","nextRewards","map","r","id","point","selectedProduct","e","target","push","parseInt","value","splice","indexOf","children","className","showIcon","selected","onChange","date","fileName","_jsxFileName","lineNumber","columnNumber","product","index","element","type","onClick","price","name","reward","_c","$RefreshReg$"],"sources":["/Users/aliciafrancis/Desktop/aliciaTest/master/src/components/Product.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { useProductApi } from '../api/product';\nimport { useRewardApi } from '../api/reward';\n\nexport const Product = () => {\n\n    const [products, setProducts] = useState([]);\n    const [rewards, setRewards] = useState([]);\n    const [startDate, setStartDate] = useState(new Date());\n\n    const ref = useRef([]);\n    \n    const {getAllProducts, getProductById} = useProductApi();\n    const {getAllRewards} = useRewardApi();\n    \n    useEffect(()=> {\n        getAllProducts().then(res => setProducts(res));\n        getAllRewards().then(res => setRewards(res))\n    }, [])\n\n    let selectedProductPrices = [];\n\n    const Unchecked = () => {\n        for (let i = 0; i < ref.current.length; i++) {\n            ref.current[i].checked = false;\n        }\n    }\n\n    const buy = () => {\n\n        /*\n        Actual - We make a post Api Call\n        then make a get Api for rewards so we can get the updated value\n\n        */\n\n        // calculate month\n        const month = startDate.getMonth() + 1;\n        \n        //calculate points\n        const sum = selectedProductPrices.reduce((a, b) => a + b, 0);\n        let points = 0;\n        if (sum > 100) {\n            points += (sum - 100)*2;\n            points += 50;\n        } else if (sum > 50) {\n            points += sum - 50;\n        }\n        \n        //update reward points\n        if (points > 0) {\n\n            const nextRewards = rewards.map(r => {\n                if(r.id == month){\n                    return {\n                        ...r,\n                        point: r.point + points\n                    }\n                }\n                return r;\n              });\n              setRewards(nextRewards);\n              Unchecked();\n        }\n    }\n\n    const selectedProduct = (e) => {\n        if (e.target.checked) {\n            selectedProductPrices.push(parseInt(e.target.value));\n        } else {\n            selectedProductPrices.splice(selectedProductPrices.indexOf(e.target.value), 1);\n        }\n    }\n\n    return (\n        <div>\n            <div>\n                Please selelct date and product and click on buy\n                <span className='date-span'>\n                    <DatePicker showIcon selected={startDate} onChange={(date) => setStartDate(date)} />\n                </span>\n            </div>\n            <div className='cards'>\n                {products.map((product, index)=>(\n                    <div className=\"card\" key={index}>\n                        <input ref={(element) => { ref.current[index] = element }} type=\"checkbox\" onClick={selectedProduct} value={product.price}/>\n                        {product.name} - ${product.price}\n                    </div>\n                ))}\n            </div>\n            <div>\n                <button type=\"button\" className=\"buy-btn btn btn-success btn-lg\" onClick={buy}>Buy</button>\n            </div>\n            <div className='cards'>\n                {rewards.map((reward, index)=>(\n                    <div className=\"card\">\n                        {reward.name} - {reward.point}\n                    </div>\n                ))}\n            </div>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}